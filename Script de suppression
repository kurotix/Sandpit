@echo off
setlocal

rem Spécifiez le chemin du dossier parent contenant les dossiers p-*
set "dossier_parent=E:\"

rem Parcourez tous les dossiers commençant par p-
for /d %%i in ("%dossier_parent%\p-*") do (
  set "dossier_a_supprimer=%%i\workspace"

  rem Vérifiez si le dossier "workspace" existe
  if exist "!dossier_a_supprimer!" (
    echo Suppression du contenu de !dossier_a_supprimer!

    rem Supprimez le contenu du dossier "workspace" en conservant le dossier lui-même
    for /d %%j in ("!dossier_a_supprimer%\*") do (
      rd /s /q "%%j"
    )

    rem Créez à nouveau le dossier "workspace" vide s'il n'existe pas
    mkdir "!dossier_a_supprimer!"
  ) else (
    echo Le dossier !dossier_a_supprimer! n'existe pas.
  )
)

endlocal
